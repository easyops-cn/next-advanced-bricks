brick: sl-card
properties:
  style:
    width: 400px
children:
- brick: div
  slot: header
  properties:
    style:
      display: flex
      alignItems: center
      justifyContent: space-between
  children:
  - brick: sl-select
    properties:
      placeholder: Select a city
      size: small
    children:
    - brick: ':forEach'
      dataSource:
      - Shenzhen
      - Los Angeles
      - New York
      - London
      children:
      - brick: sl-option
        properties:
          value: <% ITEM %>
          textContent: <% ITEM %>
    events:
      sl-change:
        useProvider: basic.http-request
        args:
        - |
          <%
            `//api.weatherapi.com/v1/current.json?${
              new URLSearchParams({
                key: '9e08e5e99e0c4b4c89023605231804',
                q: EVENT.target.value,
                aqi: 'no',
              })
            }`
          %>
        callback:
          success:
          - target: '#image'
            properties:
              hidden: false
              src: '<% String(EVENT.detail.current.condition.icon) %>'
          - target: '#text'
            properties:
              textContent: |
                <%
                  `${EVENT.detail.current.condition.text}, ${EVENT.detail.current.temp_c}Â°C`
                %>
          - target: '#time'
            properties:
              textContent: |
                <%
                  moment(
                    EVENT.detail.location.localtime,
                    'YYYY-MM-DD HH:mm'
                  ).format('h:mm A')
                %>
- brick: div
  properties:
    style:
      display: flex
      alignItems: center
  children:
  - brick: img
    properties:
      id: image
      hidden: true
      style:
        width: 32px
        height: 32px
  - brick: span
    properties:
      id: text
- brick: div
  properties:
    id: time
